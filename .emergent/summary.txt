<analysis>**original_problem_statement:**
The user wants to build a full-featured e-commerce website named Paridhaan Creations for handicrafts, pooja articles, artificial jewellery, and traditional/decorative items.

**PRODUCT REQUIREMENTS:**
*   **Store Focus:** Handicrafts, Pooja articles, Artificial jewellery, Traditional & decorative items.
*   **Frontend:** Clean, elegant design with a homepage banner, product listings with filters, product detail pages, cart, and user authentication (Email/Google).
*   **Backend:** An admin dashboard to manage products, categories, banners, orders, users, coupons, and view analytics.
*   **Checkout & Payments:** A full checkout system with Razorpay integration.
*   **GST & Invoicing:** Advanced system for GST calculation and invoice generation.
*   **Shipping:** Shiprocket integration for order processing and tracking.
*   **Notifications:** Order status updates via Email and WhatsApp.
*   **Unique Feature:** An interactive size guide and filter for Laddu Gopal dresses based on murti size.

**User's preferred language**: Hinglish. The user communicates technical requirements and feedback in a mix of Hindi and English. The next agent MUST respond in simple English and Hindi for clarity (e.g., Samajh gaya! Chalo yeh fix karte hain., Performance ab behtar hai, please check karke batayein.).

**what currently exists?**
A full-stack e-commerce platform with a React frontend, FastAPI backend, and MongoDB. The application is feature-rich, including an admin dashboard, product management, a Laddu Gopal size guide, and a complete GST/invoicing system. The last session focused on resolving critical production bugs (broken images, deployment issues), migrating user data, and then implementing several major features: an advanced GST system with HSN codes, a full Shiprocket integration for shipping, and email notifications with tracking links. The agent was about to start implementing WhatsApp notifications when the session ended.

**Last working item**:
-   **Last item agent was working:** The agent was planning to implement WhatsApp Business API for order notifications. After receiving a complex playbook, the agent decided to use the simpler, official WhatsApp Cloud API that can be integrated directly into the existing FastAPI backend.
-   **Status:** NOT STARTED
-   **Agent Testing Done:** N
-   **Which testing method agent to use?** backend testing agent. After implementation, the agent will need to test the new backend service for sending WhatsApp messages.
-   **User Testing Done:** N

**All Pending/In progress Issue list**:
There are no major pending issues. All critical bugs from the previous session have been resolved.

**In progress Task List**:
-   **Task 1: Implement WhatsApp Business API Integration [P0]**
    -   **Where to resume:** The agent has chosen to use the WhatsApp Cloud API. The next step is to begin the implementation.
        1.  Start by asking the user for the necessary credentials (Phone Number ID, WhatsApp Business Account ID, Access Token).
        2.  Create a new service module in the backend (e.g., ).
        3.  Implement functions to send templated messages for order confirmation, shipment, and delivery.
        4.  Integrate calls to this new service within the order processing logic in  (e.g., after payment verification and when an order is shipped).
    -   **What will be achieved with this?** Customers will receive real-time order updates on WhatsApp, enhancing the user experience.
    -   **Status:** NOT STARTED
    -   **Should Test frontend/backend/both after fix?** backend
    -   **Blocked on something:** User credentials for the WhatsApp Cloud API.

**Upcoming and Future Tasks**
**Upcoming Tasks:**
-   **P1: Implement a real Email Service:** The current email notification system uses a placeholder that only logs to the console. This needs to be replaced with a real email provider (e.g., Resend, SendGrid) to send actual emails in production.
-   **P1: User Verification of Shiprocket Integration:** The core integration is complete, but the user needs to test the end-to-end flow: creating an order, seeing it in the admin Shipping tab, assigning a courier, and tracking it.
-   **P2: User Verification of GST & Invoicing:** The GST system is implemented. The user needs to verify that GST calculations are correct on the checkout page and that invoices are generated correctly from the admin panel.

**Future Tasks:**
-   Abandoned Cart Recovery system.
-   Enable live payments by guiding the user to input production Razorpay keys.
-   Stock replenishment alerts for the admin.
-   **Backend Refactoring (P1):** Break down  into a proper project structure (, , ).
-   **Frontend Refactoring (P2):** Break down  into smaller, dedicated components for each admin tab.

**Completed work in this session**
-   **Critical Bug Fixes:** Resolved site-wide image display issues and production deployment failures (CORS, backend URL, ).
-   **Data Restoration:** Investigated data loss issues from previous forks and re-created the user's missing Laddu Gopal products.
-   **GST & Invoicing System:** Implemented a full-featured GST system with an admin management UI, HSN codes on products, and a dynamic GST breakdown on the checkout page.
-   **Shiprocket Integration:** Integrated Shiprocket for shipping, including an admin UI to manage shipments and a customer-facing tracking page.
-   **Email Notifications:** Added logic to send order confirmation and shipping update emails (currently using a placeholder service) with a direct link to the tracking page.

**Earlier issues found/mentioned but not fixed**
-   **N+1 Query Pattern:** A potential performance bottleneck in the  endpoint in  remains unaddressed.

**Known issue recurrence from previous fork**
-   **Issue recurrence in previous fork:** Image display issues.
-   **Recurrence count:** 2+
-   **Status:** RESOLVED. The agent fixed the issue by correctly using  for specific image types and implementing more robust fallback URLs.

**Code Architecture**


**Key Technical Concepts**
-   **Frontend:** React, Tailwind CSS, , Conditional Rendering.
-   **Backend:** FastAPI, Pydantic,  for PDF invoices,  for API calls.
-   **Integrations:** Shiprocket API, WhatsApp Cloud API (Planned).
-   **Database:** MongoDB.

**key DB schema**
-   **products:** , 
-   **orders:** , , 
-   **New Collections:** , , 

**All files of reference**
-   : Core logic for all new features.
-   : New module for Shiprocket logic.
-   : Major UI changes for GST and Shipping management.
-   : UI for GST breakdown.
-   : New customer-facing page.
-   : Added tracking button.

**Areas that need refactoring**:
-   ** (CRITICAL):** Has grown significantly and urgently needs to be refactored into a modular structure (, , ).
-   ** (CRITICAL):** Is now over 3000 lines long and must be broken down into smaller components for maintainability.
-   **Unused Code:** The file  was created but never used and can be removed.

**key api endpoints**
-    (GET, POST)
-    (POST)
-    (POST)
-    (GET)
-    (GET)

**Critical Info for New Agent**
-   **Top Priority:** Begin implementation of the WhatsApp Business API integration. You will need to start by requesting the necessary credentials from the user.
-   **User Sentiment:** The user has been frustrated by past issues. Maintain clear, proactive communication in Hinglish and ensure features are thoroughly tested.
-   **Technical Debt:** The backend () and frontend () are in critical need of refactoring. This should be prioritized once the current feature set is stable and verified by the user.
-   **Mocked Service:** The email notification feature is incomplete. It uses a placeholder and needs a real email provider to function in production. This should be addressed as a high-priority upcoming task.

**documents and test reports created in this job**
-    (updated extensively)

**Last 10 User Messages and any pending HUMAN messages**
1.  **Request:** Implement GST & Invoicing. (Completed)
2.  **Info:** Provided GSTIN and business details. (Used)
3.  **Request:** Implement HSN codes and GST breakdown on checkout. (Completed)
4.  **Request:** Integrate Shiprocket for automated shipping and tracking. (Completed)
5.  **Info:** Provided Shiprocket credentials. (Used)
6.  **Request:** Implement adding a tracking link to the order confirmation email. (Completed)
7.  **Request:** Implement order updates via WhatsApp Business API. (In Progress)
8.  **Confirmation:** Confirmed to proceed with the WhatsApp integration using the WhatsApp Business API option.
9. **Complaint:** Reported data loss after fork. (Resolved)
10. **Complaint:** Reported image cropping issues. (Resolved)

**Project Health Check:**
-   **Broken:** None.
-   **Mocked:** The email service is a placeholder () and does not send real emails. This prevents the notification feature from working in a deployed environment.
-   **Needs Improvement:**
    -   The monolithic  and  files are becoming unmanageable.
    -   A real email provider needs to be integrated.

**3rd Party Integrations**
-   **Razorpay** (Payments) — requires User API Key.
-   **Emergent-managed Google Auth** (Authentication).
-   **Shiprocket** (Shipping) — Integrated with User API Key.
-   **Twilio** (SMS Notifications) — Inactive.
-   **reportlab** (Backend PDF Generation).
-   **WhatsApp Cloud API** (Planned).

**Testing status**
-   **Testing agent used after significant changes:** NO
-   **Troubleshoot agent used after agent stuck in loop:** NO
-   **Test files created:** None.
-   **Known regressions:** None.

**Credentials to test flow:**
-   **Admin Access:** Google Sign-In with the email .
-   **Shiprocket:** Credentials are stored in .

**What agent forgot to execute**
-   The agent implemented an email notification feature but used a placeholder  service instead of integrating a real email provider like SendGrid or Resend. This means the feature is non-functional in production.
-   The agent created an  component but never integrated it, leaving unused code in the repository.</analysis>
